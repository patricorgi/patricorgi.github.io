<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"patricorgi.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Patrick&#39;s Blog">
<meta property="og:url" content="https://patricorgi.github.io/index.html">
<meta property="og:site_name" content="Patrick&#39;s Blog">
<meta property="og:locale">
<meta property="article:author" content="P. Wu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://patricorgi.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>Patrick's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Patrick's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>时间线</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2021/02/26/Alfred%E7%9A%84Script%20Filter%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/26/Alfred%E7%9A%84Script%20Filter%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">如何在Alfred里使用python创建Script Filter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-26 19:18:47 / 修改时间：19:22:40" itemprop="dateCreated datePublished" datetime="2021-02-26T19:18:47-05:00">2021-02-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://www.alfredapp.com/help/workflows/inputs/script-filter/json-example.png" alt="图源：官方文档"></p>
<p>我首次购买的来自大厂的效率应用即是Alfred。它的社区十分成熟，围绕它开发的资源数不胜数，我几乎不用自己研究，直接从网上就能找到符合我需求的workflow。</p>
<p>若干年之后我购买了Keyboard Maestro，这个KM也有个类似Alfred的“搜索框”（见下图），且对我而言更重要的是，在KM里编辑Macro要比Alfred里编辑workflow要直观、容易得多，主要有以下几点原因：</p>
<ul>
<li>首先，它的Maco编辑是类似iOS/iPadOS中快捷指令式的模块组合，非常直观</li>
<li>其次，KM具有更详细的说明文档，以及一个十分活跃的forum</li>
<li>此外，KM对变量的管理非常容易理解，在偏好设置里有个专门分区进行各种变量的储存</li>
<li>Last but not least，它支持我最钟情AppleScript语言的语法高亮（在Alfred里编辑AppleScript可太难受了，既没有自动缩进也没有语法高亮）</li>
</ul>
<p>于是，我开始思考，除了UI比较讨喜并且可以自定义之外，Alfred的优势究竟在哪里？直到最近我才发现——<strong>Script Filter</strong>即是答案。</p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gnvj5vhzrfj31ag0qg19t.jpg" alt="KM的搜索框"></p>
<p>首先我们要知道，Alfred是一种选单结构，选单里的每个条目，都能显示一定的信息（主副标题、图标等），当然还有你看不到的选中之后的供下一步操作的输出值（Alfred里叫做query）。</p>
<p>于是，如果简单描述，Script Filter可以让你利用一些脚本语言<strong>自定义</strong>一系列选单条目：包括它的显示内容及每个条目的query。所谓<em>自定义</em>，我比较熟悉的做法是用python脚本输出json格式的条目信息，这是本文希望向读者阐述清楚的内容。</p>
<p><img src="https://www.alfredapp.com/help/workflows/inputs/script-filter/json-format.png" alt="官方Script Filter示例"></p>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>首先，新建一个空的workflow，并右键空白处→Inputs→Script Filter新建一个Script Filter模块</p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gnvljv9vn8j319w0u01kz.jpg"></p>
<p>然后，右键点击左栏中的workflow，选择Open in Finder，<br><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gnvlv1uy5dj30za0pm15n.jpg"></p>
<p>这样会打开这个workflow所在的根目录，在该目录中建立<code>myscript.py</code>文件，文件内容如下：<img src="https://tva1.sinaimg.cn/large/008eGmZEly1go1s7rpneuj30t40veqcw.jpg"></p>
<p>这个<code>results</code>变量是一个dict，其中只有一个键值对，<code>&quot;items&quot;</code>的值是一系列会显示在Alfred选单里的条目，条目的数据类型为dict，其中不同的键对应着条目的不同属性。你需要用<code>json.dumps</code>将其转换成json格式，再<code>print</code>出来，相应的内容就会像下图那样显示在Alfred的结果里了。</p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gnvlta2nmcj316g0c6q89.jpg"></p>
<p>上面涉及到的<code>title</code>， <code>subtitle</code>和<code>arg</code>是最基本的几个键，你可以在<a target="_blank" rel="noopener" href="https://www.alfredapp.com/help/workflows/inputs/script-filter/json/">这个页面</a>下找到官方支持的所有键。这三个键的前两个是主副标题，最后一个<code>arg</code>则是会进入workflow下一步操作的输出值query。在这个例子中，两个条目的输出值都是一个网址，如果我把这个Script Filter连接上一个Open URL的操作（见下图），并指定URL为<code>&#123;query&#125;</code>。那么当我选中一个条目，就会打开对应的网址。</p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gnvmh091qpj316s0qkk7f.jpg"></p>
<p>以此类推，如果你是位python大神，可以很容易通过Script Filter让Alfred显示出更加复杂多样的内容。</p>
<h2 id="我利用Script-Filter做了啥？"><a href="#我利用Script-Filter做了啥？" class="headerlink" title="我利用Script Filter做了啥？"></a>我利用Script Filter做了啥？</h2><p>对我而言，Script Filter配合python最佳用法自然就是爬虫了。我的工作需要频繁访问一个网页端数据库，其中有1000多个条目。</p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1go1rw0z1tmj30l00icgqe.jpg"></p>
<p>利用Script Filter我可以在不打开浏览器的情况下搜索并直接打开其中一个条目。</p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1go1rw03g9bj30tg0iuqap.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2021/01/18/Keyboard-Maestro%E4%B8%8B%E7%94%A8JavaScript%E6%9D%A5%E5%AE%9E%E7%8E%B0%E7%BD%91%E9%A1%B5%E4%BA%A4%E4%BA%92%E8%87%AA%E5%8A%A8%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/18/Keyboard-Maestro%E4%B8%8B%E7%94%A8JavaScript%E6%9D%A5%E5%AE%9E%E7%8E%B0%E7%BD%91%E9%A1%B5%E4%BA%A4%E4%BA%92%E8%87%AA%E5%8A%A8%E5%8C%96/" class="post-title-link" itemprop="url">Keyboard Maestro下用JavaScript来实现网页交互自动化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-18 15:13:11 / 修改时间：15:13:31" itemprop="dateCreated datePublished" datetime="2021-01-18T15:13:11-05:00">2021-01-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2020/12/25/%E5%9C%A8Day%20One%E8%AE%B0%E5%BD%95%E6%B5%81%E6%B0%B4%E8%B4%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/25/%E5%9C%A8Day%20One%E8%AE%B0%E5%BD%95%E6%B5%81%E6%B0%B4%E8%B4%A6/" class="post-title-link" itemprop="url">在Day One里记流水账</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-25 00:13:56" itemprop="dateCreated datePublished" datetime="2020-12-25T00:13:56-05:00">2020-12-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-12 20:02:28" itemprop="dateModified" datetime="2021-01-12T20:02:28-05:00">2021-01-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>身处国外，因为疫情严重，下班后几乎只能呆在家中。单调的生活导致我对时间流逝的感知变得有些模糊，突然就很想记录下周围发生的一切，好让未来的我知道，这段时间我并没有“白白浪费”。所谓流水账，就必须事无巨细。想记录的事情太多了：在B站上看了哪个视频、看了谁的吃播下饭、访问了哪个有意思的网站、Apple Music给我推荐了哪首好听的歌，甚至是「窗外树梢上有两只小鸟在打架」这样的小事我都必须记录下来。</p>
<p>其实我之前写过一篇如何像《未来日记》里男主那样记录生活的文章，但那篇文章里提到的Draft转订阅制后我已经彻底弃用了，而且实现方法过于复杂。于是就有了这篇文章。</p>
<p><strong>演示</strong></p>
<iframe src="https://player.vimeo.com/video/495865897" width="640" height="1387" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>

<h2 id="所需工具"><a href="#所需工具" class="headerlink" title="所需工具"></a>所需工具</h2><ol>
<li>iCloud Drive（免费的5G容量已经够用了）</li>
<li>快捷指令</li>
<li>Day One</li>
</ol>
<h2 id="添加「碎片事件」"><a href="#添加「碎片事件」" class="headerlink" title="添加「碎片事件」"></a>添加「碎片事件」</h2><p>利用这个<a target="_blank" rel="noopener" href="https://www.icloud.com/shortcuts/587be454feb74d59804cc8c5ebb6d795">添加事件</a>快捷指令，快速键入一个碎片事件。这个碎片事件会被追加到<code>iCloud Drive/Shortcuts/碎片事件</code>目录下的名称为<code>yyyy-MM-dd.txt</code>的文件中。其中yyyy-MM-dd是符合<a target="_blank" rel="noopener" href="https://support.apple.com/zh-cn/guide/shortcuts/apd8d9b19184/ios">Unicode Technical Standard #35</a> 的格式。如果当天的txt文件不存在，快捷指令则会自动创建该文件并追加碎片事件内容。</p>
<p>每次键入，会在<code>txt</code>文件中添加一行如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;HH:mm&#96; [你键入的内容]</span><br></pre></td></tr></table></figure>
<p>其中<code>HH:mm</code>表示记录时间（24小时制）。时间前后两个抑音符(backtick)是为时间添加一个代码块样式，不喜欢的可以去掉。</p>
<p>这样创建多个事件后，txt文件里就会变成这个样子：<br><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gmjb44gyoij30pq08z401.jpg"></p>
<p>这个快捷指令还可以从分享菜单中运行，如果分享内容包含URL，就会自动抓取URL标题并生成Markdown链接格式。下图中高亮的B站视频链接就是一个例子。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;HH:mm&#96; [URL标题](URL)</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/0081Kckwly1gm1wvid7fmj318g0rd7ae.jpg"></p>
<h2 id="生成当日总结"><a href="#生成当日总结" class="headerlink" title="生成当日总结"></a>生成当日总结</h2><p>之后，你可以利用这个<a target="_blank" rel="noopener" href="https://www.icloud.com/shortcuts/081211d4ad254e8cb8dcf54c39e7f2fd">当日总结</a>快捷指令来生成当日总结报告。</p>
<p>这个快捷指令会首先从<code>iCloud Drive/Shortcuts/碎片事件</code>路径下获取一个txt文件。为了避免在同一日期下创建两个总结条目，会先根据该文件的创建日期在Day One中查找是否具有这个日期下的总结条目。如果存在，就打开条目并把所有碎片事件复制到剪贴板，再手动粘贴到条目中；如果不存在，就按照下图中的模板创建新的总结条目。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">###### 精彩事件</span><br><span class="line">[来自事件收集文件里的内容]</span><br><span class="line"></span><br><span class="line">###### 心情</span><br><span class="line">😄🙂😐🙁😫</span><br><span class="line"></span><br><span class="line">###### 时间线</span><br><span class="line">[该日中的所有日历事件]</span><br></pre></td></tr></table></figure>

<h2 id="在macOS上进行事件收集"><a href="#在macOS上进行事件收集" class="headerlink" title="*在macOS上进行事件收集"></a>*在macOS上进行事件收集</h2><p>因为上述方法用到了iCloud Drive的存储空间，于是在macOS下你也可以访问这些<code>txt</code>文件。于是我利用Keyboard Maestro来添加碎片事件到收集文件中，就实现了同步。不过在本文中我不赘述具体方案，只放几张截图，有兴趣研究Keyboard Maestro的朋友可以作为参考。</p>
<p>首先，创建一个名为“记录碎片事件”的Macro，由下列三个Action组成：</p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gmk6nzzkugj30jd0dmjw2.jpg"></p>
<p>你还可以再配合下面的Action来收集Safari页面</p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gmk6lhzcr3j30jd03u75v.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2017/03/12/%E5%83%8F%E6%9C%AA%E6%9D%A5%E6%97%A5%E8%AE%B0%E4%B8%AD%E5%A4%A9%E9%87%8E%E9%9B%AA%E8%BE%89%E9%82%A3%E6%A0%B7%E8%AE%B0%E5%BD%95%E3%80%8C%E7%84%A1%E5%B7%AE%E5%88%A5%E6%97%A5%E8%A8%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/12/%E5%83%8F%E6%9C%AA%E6%9D%A5%E6%97%A5%E8%AE%B0%E4%B8%AD%E5%A4%A9%E9%87%8E%E9%9B%AA%E8%BE%89%E9%82%A3%E6%A0%B7%E8%AE%B0%E5%BD%95%E3%80%8C%E7%84%A1%E5%B7%AE%E5%88%A5%E6%97%A5%E8%A8%98/" class="post-title-link" itemprop="url">像未来日记中天野雪辉那样记录「無差別日記」</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-03-12 09:46:24" itemprop="dateCreated datePublished" datetime="2017-03-12T09:46:24-04:00">2017-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-25 00:09:52" itemprop="dateModified" datetime="2020-12-25T00:09:52-05:00">2020-12-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>其实这是一个小小的 LCP + Drafts + TextExpander 实例，因为微博上有人求方法，我就写一个正式的教程吧。</p>
<p>无差别日记需要用到的 App 有：</p>
<ul>
<li>Launch Center Pro (LCP)</li>
<li>Drafts 4</li>
<li>TextExpander</li>
<li>一个支持 URL Scheme 的笔记应用，比如 Day One（或 Evernote ）</li>
</ul>
<p>我把 Launch Center Pro 作为书写和提交「無差別日記」的入口，我设想你需要以天野雪辉那样丧心病狂的记录频率来记录周围发生的无差别事件，然后以「天」为单位提交一整天记录的内容到日记应用 Day One 中。所以一天下来的「無差別日記」记录流程基本上是这样的：  </p>
<p><img src="https://ww2.sinaimg.cn/large/006tNbRwgy1fdk4xtr41pj318a0hcdj8.jpg"></p>
<h2 id="记录無差別事件"><a href="#记录無差別事件" class="headerlink" title="记录無差別事件"></a>记录無差別事件</h2><p>Drafts 是作为暂存区的存在。我们要先钦定一条专门用于录入無差別事件的 Draft。首先需要取得 Draft 的 UUID 码，UUID 相当于 Draft 的身份证号码，只有通过它 LCP 才能直到你需要往哪一条 Draft 里录入信息。</p>
<p>你可以运行 <a target="_blank" rel="noopener" href="http://drafts4-actions.agiletortoise.com/a/13V">Copy UUID</a> 这个 Action 来复制一条 Draft 的 UUID 码。</p>
<p>之后我们需要利用 TextExpander 来生成时间信息，我用下面这个 TE Snippet 来生成当前时间，缩写为 ttime，在 LCP 中使用 <code>[textexpander:ttime]</code> tag 来使用它。</p>
<p><img src="https://ww2.sinaimg.cn/large/006tNbRwgy1fdk5ers58fj31e818gn4g.jpg"></p>
<p>得到 UUID 和并在 TextExpander 里添加了时间 Snippet 之后，我们打开 LCP，先在设置中同步一下 TextExpander 的 Snippets。然后新建一个 Action，在 Action Composer 里搜索到 Drafts 4，然后选择 Append to Draft and Return 这个预置 Action，之后依次填入</p>
<ul>
<li>Name: 無差別日記</li>
<li>UUID: 你复制到的 UUID</li>
<li>Text:<code>[textexpander:ttime]</code> <code>[prompt: 無差別事件]</code> </li>
<li>Action:</li>
</ul>
<h2 id="提交一整天记录的事件"><a href="#提交一整天记录的事件" class="headerlink" title="提交一整天记录的事件"></a>提交一整天记录的事件</h2><p>我在 Drafts 4 里创建了这样一个 Action：</p>
<ul>
<li><p>Step 1: 将 Draft 内容复制到剪贴板</p>
</li>
<li><p>Step 2: 利用一个脚本来清空当前 Draft 内容，脚本内容</p>
<p>  // Script steps run short Javascripts<br>  // For documentation and examples, visit:<br>  // <a target="_blank" rel="noopener" href="http://help.agiletortoise.com/">http://help.agiletortoise.com</a></p>
<p>  draft.content = “”;<br>  commit(draft);</p>
</li>
<li><p>Step 3: 用 Day One 提供的 URL Scheme 从剪贴板创建新日志</p>
</li>
</ul>
<p><img src="https://ww4.sinaimg.cn/large/006tNbRwgy1fdk60ihj1tj31kw0xkqc7.jpg"></p>
<p>然后将此 Draft Action 命名为「无差别日记」</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNbRwgy1fdk6gt28nij30x91n4dpq.jpg"></p>
<p>为了保证第二天能够继续使用这条被钦定的 Draft，我们必须要删除当天记录到 Draft 中的内容，所以需要清空它。</p>
<p>于是在 LCP 中创建一个新的 Action，在 Action Composer 中使用 Drafts 4 预置的 Open Draft，然后填好以下三条 Option 即可</p>
<ul>
<li>Name: 提交無差別日記</li>
<li>UUID: 你之前复制的那条 Draft 的 UUID</li>
<li>Action: 无差别日记</li>
</ul>
<p>如果需要你还可以给这个 Action 加一个 Schedule，让它每天固定时间提醒你提交当天记录的内容。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>通过这两个 LCP Action 你可以方便地记录无差别事件，然后每天睡前提交到日记应用中就可以了。这样你就可以走上成神之路了，加油吧少年(ง •_•)ง</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2016/12/02/Snappy%EF%BC%9A%E5%8D%A1%E7%89%87%E5%BC%8F%E6%88%AA%E5%B1%8F%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/12/02/Snappy%EF%BC%9A%E5%8D%A1%E7%89%87%E5%BC%8F%E6%88%AA%E5%B1%8F%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">Snappy：卡片式截屏工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-12-02 12:52:00" itemprop="dateCreated datePublished" datetime="2016-12-02T12:52:00-05:00">2016-12-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-25 00:09:10" itemprop="dateModified" datetime="2020-12-25T00:09:10-05:00">2020-12-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="基本截图功能"><a href="#基本截图功能" class="headerlink" title="基本截图功能"></a>基本截图功能</h2><p>截图功能没什么好说的，它的默认截图快捷键是 ⌘+⇧+2，截图时再按住空格可以截取窗口。</p>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006y8lVajw1facqav9t9tj312s0n5n0e.jpg"><img src="http://ww2.sinaimg.cn/large/006y8lVajw1facqav9t9tj312s0n5n0e.jpg" alt="img"></a></p>
<p>那么，为何将其曾为称为「卡片式」截屏？因为这个软件的截图真像是把屏幕的一部分提取出来，并让它置顶悬浮在桌面上。像一张「小卡片」一样：</p>
<p><a target="_blank" rel="noopener" href="http://ww1.sinaimg.cn/large/006y8lVajw1facor1cto8j31kw0uqn5u.jpg"><img src="http://ww1.sinaimg.cn/large/006y8lVajw1facor1cto8j31kw0uqn5u.jpg" alt="img"></a></p>
<p>这已经不只是截图工具这么简单了，这意味着你可以用 Snappy 抓取屏幕中任何你希望「置顶」的信息。举个具体的例子，我正在看电子版的物理学教材，某处提到 A 公式是通过若干页之前的 B、C、D 公式推导出来的，如果我要想彻底理解这个推导过程，就必须同时看这几个公式。最没效率的方法就是给这几个公式的所在页码挨个加书签，然后来回切换，反复比对。但如果利用 Snappy 就可以方便地让 B、C、D 公式置顶在屏幕上，同时查看这几个公式：</p>
<p><a target="_blank" rel="noopener" href="http://ww4.sinaimg.cn/large/006y8lVajw1facp8cl90vj31kw0woqch.jpg"><img src="http://ww4.sinaimg.cn/large/006y8lVajw1facp8cl90vj31kw0woqch.jpg" alt="img"></a></p>
<p>这是 Snappy 最让我着迷的地方。下面是它支持的基本截图工具：</p>
<p><strong>指针工具 ⬉</strong></p>
<p>拖动、在边缘处放大缩小</p>
<p><strong>画笔工具 🖌️</strong></p>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006y8lVajw1facpcdmep1j316e0o07al.jpg"><img src="http://ww2.sinaimg.cn/large/006y8lVajw1facpcdmep1j316e0o07al.jpg" alt="img"></a></p>
<p>遗憾的是不支持形状📐输入，考验你鼠绘的时候到了。</p>
<p><strong>文字工具 T</strong></p>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006y8lVajw1facpco8cfrj316e0piwla.jpg"><img src="http://ww2.sinaimg.cn/large/006y8lVajw1facpco8cfrj316e0piwla.jpg" alt="img"></a></p>
<p><strong>橡皮擦 ❍</strong></p>
<p>擦除画笔工具的痕迹</p>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006y8lVajw1facpd0kyjbj315c0qstfr.jpg"><img src="http://ww2.sinaimg.cn/large/006y8lVajw1facpd0kyjbj315c0qstfr.jpg" alt="img"></a></p>
<p><strong>属性设置 🕹</strong></p>
<ul>
<li>数字 1-9 调整透明度</li>
<li>⌘ +／- 调整大小</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://ww1.sinaimg.cn/large/006y8lVajw1facpdxhjvdj315y0nyn3j.jpg"><img src="http://ww1.sinaimg.cn/large/006y8lVajw1facpdxhjvdj315y0nyn3j.jpg" alt="img"></a></p>
<p>以上工具均可自定义快捷键</p>
<h2 id="截图库"><a href="#截图库" class="headerlink" title="截图库"></a>截图库</h2><p>通过 ⌘+⇧+2 快捷键截取的「小卡片」，都会保存到 Snappy 的截图库中，你可以在菜单栏的 Snappy 图表打开截图库，也可以使用默认快捷键 ⌘⌥⇧L 打开。</p>
<p><a target="_blank" rel="noopener" href="http://ww4.sinaimg.cn/large/006y8lVajw1facps35uf7j31k812u44n.jpg"><img src="http://ww4.sinaimg.cn/large/006y8lVajw1facps35uf7j31k812u44n.jpg" alt="img"></a></p>
<p>可以看到截图库侧栏中有根据时间的分类，以及根据Apps的分类。截图库中的所有「小卡片」，你可以进行重新编辑和分享。</p>
<p>它支持的分享功能有：</p>
<ul>
<li>SnappyApp 图床，支持定时删除的安全图床模式</li>
<li>Imgur 图床，无需注册</li>
<li>Evernote</li>
<li>Twitter</li>
<li>Slack</li>
<li>Facebook</li>
</ul>
<p>你可以在 <a target="_blank" rel="noopener" href="https://itunes.apple.com/cn/app/snappy-snapshots-smart-way./id512617038?l=en&mt=12">App Store</a> 上免费下载到这一款软件。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2016/11/30/%E7%AE%80%E4%B8%AD%E6%B1%82%E6%95%88%EF%BC%9AMarkdown%20%E9%81%87%E4%B8%8A%20LaTeX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/11/30/%E7%AE%80%E4%B8%AD%E6%B1%82%E6%95%88%EF%BC%9AMarkdown%20%E9%81%87%E4%B8%8A%20LaTeX/" class="post-title-link" itemprop="url">简中求效：Markdown 遇上 LaTeX</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-11-30 05:17:00" itemprop="dateCreated datePublished" datetime="2016-11-30T05:17:00-05:00">2016-11-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-25 00:09:12" itemprop="dateModified" datetime="2020-12-25T00:09:12-05:00">2020-12-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我是一个物理工作者，MS Word／WPS 什么的很早就扔掉了。LaTeX 才是我们的家常便饭。本科时候在课堂上我就喜欢拿着电脑做笔记。macOS 下只要下载一个 MacTeX，它自带 TeXShop，然后一切就都搞定了。</p>
<p>后来知道了 Markdown 语法，这样一个花 2 分钟就能学会的「标记语言」直接戳中我这样一个极简主义者的 G 点。与 LaTeX 最大的不同在于，它不会像大多数 LaTeX 编辑器一样在仅修改了一个标点之后，都要求重新编译。</p>
<p>然而要同时实现 Markdown 的极「简」，和 LaTeX 的「效」能是非常艰难的。虽然在静态博客里可以使用 MathJax 显示公式，但在 macOS 端编辑博文时没有 LaTeX 预览也是很难过的一件事。</p>
<h3 id="MWeb"><a href="#MWeb" class="headerlink" title="MWeb"></a><del>MWeb</del></h3><p>你可能会说 MWeb 就支持 LaTeX 的编辑和预览呀！的确，我尝试过它，但这里提出两点我后来放弃它的原因：</p>
<ol>
<li>预览的公式字体太难看，不知道为什么作者不设置为科学期刊上最为常用的 Latin Modern Math 字体。我在作者的 GitHub 下发过一个 issue，他也没能给我一个有效的答复。</li>
<li>MWeb 没有 iOS 版，不能多设备同步。</li>
</ol>
<h3 id="Typora"><a href="#Typora" class="headerlink" title="Typora"></a><del>Typora</del></h3><p>还有声名鹊起的 Typora，我觉得它单作为 Markdown+LaTeX 编辑器可谓最优选：插入公式的方式不能再漂亮、默认的主题也简单优雅。</p>
<p>但它不能对文档进行管理，没有所谓的「外部文件夹」。而且，它也没有 iOS 版。</p>
<p>综上，我的要求其实很苛刻——优秀的编辑环境、Markdown、LaTeX预览、多设备同步集合为一体。于是我开始在 Ulysses 和 iA Writer 上寻求出路，因为这两个软件首先就符合我对「优秀的编辑环境」的要求。最终我找到了我的解决方案。</p>
<h2 id="方案一-Ulysses-HTML"><a href="#方案一-Ulysses-HTML" class="headerlink" title="方案一 Ulysses + HTML"></a>方案一 Ulysses + HTML</h2><p>Ulysses 是支持 HTML 预览的，所以我们在 Markdown 文档里插入一些 HTML 语言也没有关系。前天我就在 <a target="_blank" rel="noopener" href="https://twitter.com/ulyssesapp">@ulysses</a> 官推上看到这个在 Ulysses 下实现公式预览的方案。</p>
<p>只需要在文档开头加入这四行 Raw Source 即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~~ &lt;script type&#x3D;&quot;text&#x2F;x-mathjax-config&quot;&gt;</span><br><span class="line">~~ MathJax.Hub.Config(&#123;tex2jax: &#123;inlineMath:[[&#39;$&#39;,&#39;$&#39;]]&#125;&#125;);</span><br><span class="line">~~ &lt;&#x2F;script&gt;</span><br><span class="line">~~ &lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;http:&#x2F;&#x2F;cdn.mathjax.org&#x2F;mathjax&#x2F;latest&#x2F;MathJax.js?config&#x3D;TeX-AMS-MML_HTMLorMML&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>其实这就是 HTML 下的 MathJax 相关设置。不用担心那些小波浪号，它们是 Ulysses 用来标记 Raw Source 的符号，无论是导出还是发布到你的的静态博客上都不会造成影响。</p>
<p>之后只要将正常 LaTeX 语法包裹进 Raw Source 格式中即可，比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">神奇公式：</span><br><span class="line">~~ $$\left(iD\!\!\!&#x2F;+m\right)\psi &#x3D; 0$$</span><br><span class="line">~$\dfrac&#123;1&#125;&#123;2&#125;$~，这就是二分之一，想不到吧！</span><br></pre></td></tr></table></figure>
<p>然后调整 Ulysses 的导出格式为 HTML，使用 ⌘+⇧+P 就可以预览文档里的公式了！</p>
<p><a target="_blank" rel="noopener" href="https://ulyssesapp.com/blog/wp-content/uploads/2016/11/MathJax-Example.png"><img src="https://ulyssesapp.com/blog/wp-content/uploads/2016/11/MathJax-Example.png" alt="img"></a></p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://ulyssesapp.com/blog/2016/11/eline-explains-5/">Writing Mathematical Equations in Ulysses</a></p>
<h2 id="方案二-iA-Writer-Export-Markdown-to-PDF-Service"><a href="#方案二-iA-Writer-Export-Markdown-to-PDF-Service" class="headerlink" title="方案二 iA Writer + Export Markdown to PDF(Service)"></a>方案二 iA Writer + Export Markdown to PDF(Service)</h2><p>我们也可以利用 iA Writer 实现 Markdown + LaTeX。</p>
<p>同样是解决 LaTeX 公式预览问题，我发现了这样一个系统服务——<a target="_blank" rel="noopener" href="https://github.com/lukaskubanek/iA-Writer-Export">Export Markdown to PDF</a>。它是基于 pandoc 命令，在 iA Writer 下将文档转换为 PDF，并在默认 PDF 应用程序下预览。虽然不像 iA Writer 自带的预览那样高效，但如果只是插入几行公式，对我来说这已经最佳方案了。况且近日发布的 iA Writer 4 支持多文件、模块化编辑，对于每个子文件而言 pandoc 的编译效率也十分高了。<br><a target="_blank" rel="noopener" href="http://ww3.sinaimg.cn/large/006y8lVajw1faa47j8atxj30qc0c6dht.jpg"><img src="http://ww3.sinaimg.cn/large/006y8lVajw1faa47j8atxj30qc0c6dht.jpg" alt="img"></a></p>
<p>遗憾的是，这个 Export Markdown to PDF 已多年没有维护了，它环境变量设置已经因为新版本路径更改无法使用，而且最致命的是它不支持中文文档。于是我将它 Fork 了一下，修改成为了支持中文的 LaTeX 编译服务，下面我用四步教大家如何配置它：</p>
<h3 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h3><p>首先，毋庸置疑你的电脑里必须安装有 <a target="_blank" rel="noopener" href="http://www.tug.org/mactex/">MacTeX</a>，而且我建议安装最新的 2016 版。<br>以及，转换 pdf 所必需的 pandoc（用 <code>brew install pandoc</code> 安装）</p>
<h3 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h3><p>配置 xelatex 中文编译模板</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~&#x2F;Templates</span><br><span class="line">cd ~&#x2F;Templates</span><br><span class="line">pandoc -D latex &gt; template.tex</span><br></pre></td></tr></table></figure>
<p>然后编辑 <code>template.tex</code> 文件，定位到<code>% if luatex or xelatex</code>，在下图白色箭头处（<code>\fi</code>的下一行）插入如下语句：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">% SUPPORT for Chinese</span><br><span class="line">\usepackage[boldfont,slantfont,CJKchecksingle]&#123;xeCJK&#125;</span><br><span class="line">\usepackage&#123;fontspec,xltxtra,xunicode&#125;</span><br><span class="line">\defaultfontfeatures&#123;Mapping&#x3D;tex-text,Scale&#x3D;MatchLowercase&#125;</span><br><span class="line">\punctstyle&#123;quanjiao&#125;</span><br><span class="line">\setCJKmainfont&#123;WenQuanYi Micro Hei&#125;</span><br><span class="line">\setCJKsansfont&#123;KaiTi&#125;</span><br><span class="line">\setCJKmonofont&#123;SimSun&#125;</span><br><span class="line">\defaultfontfeatures&#123;Ligatures&#x3D;TeX,Scale&#x3D;MatchLowercase&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006y8lVajw1faa4ihjkfzj31hs11ywni.jpg"><img src="http://ww2.sinaimg.cn/large/006y8lVajw1faa4ihjkfzj31hs11ywni.jpg" alt="img"></a><br>其中<code>\setCJKmainfont&#123;WenQuanYi Micro Hei&#125;</code>可以自定义主字体（LaTeX 老司机也可以尝试修改其他内容），我测试时用的是「文泉驿微米黑」字体，大家可自行修改。但最好像我一样使用字体的英文名称。什么？你不知道怎么查看字体的英文名称？到终端使用下面这条命令查阅系统内的字体英文名吧。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fc-list :outline -f &quot;%&#123;family&#125;\n&quot;</span><br></pre></td></tr></table></figure>
<p>如果系统提示找不到 <code>fc-list</code> 命令，可能你需要去安装一个 <a target="_blank" rel="noopener" href="https://www.xquartz.org/">XQuartz</a></p>
<h3 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h3><p>下载我 Fork 的 <a target="_blank" rel="noopener" href="https://github.com/patricorgi/iA-Writer-Export">Export Markdown to PDF</a>，把 workflow 文件放到<code>~/Library/Services</code>路径下</p>
<h3 id="第四步"><a href="#第四步" class="headerlink" title="第四步"></a>第四步</h3><p>在 iA Writer 下使用：iA Writer → 服务(Services) → Export Markdown to PDF 即可。编译的时候可以看到右上菜单栏会有个旋转的小齿轮⚙️，特别可爱。如果 LaTeX 语法有错误，错误信息会以弹窗的形式出现，方便你 debug。</p>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006y8lVajw1faa6un0c9bj31kw0zkq80.jpg"><img src="http://ww2.sinaimg.cn/large/006y8lVajw1faa6un0c9bj31kw0zkq80.jpg" alt="img"></a></p>
<h3 id="一些说明"><a href="#一些说明" class="headerlink" title="一些说明"></a>一些说明</h3><ul>
<li><code>$ \dfrac&#123;1&#125;&#123;2&#125;$</code> 会报错，要改为<code>$\dfrac&#123;1&#125;&#123;2&#125;$</code>才行，好像是第一个<code>$</code>后面不能出现空格</li>
<li>需要自行研究一些特殊宏包的插入，例如页边距的设置等，毕竟在 Markdown 文档里无法使用 <code>\usepackage</code> 命令了，有些茫然不知所措</li>
<li>用 Automator 打开 Export Markdown to PDF.workflow 你可以看到下面这些内容：<ul>
<li>pandoc 环境设置</li>
<li>xelatex 环境设置</li>
<li>pandoc 转换 pdf 的命令，其中 <code>--template</code> 字段设置的是 pandoc 编译模板，这就是第二步中为何要生成 <code>~/Templates/template.tex</code> 文件的原因，你可以自行配置多个模板，然后记得在 workflow 文件里修改模板位置。</li>
</ul>
</li>
</ul>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>祝大家 LaTeX 愉快！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2016/11/27/Workflow%20+%20Pythonista%20%E5%9C%A8%20iOS%20%E4%B8%8A%E4%BD%BF%E7%94%A8%E6%96%B0%E6%B5%AA%E7%9F%AD%E9%93%BE%E6%8E%A5%E6%9C%8D%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/11/27/Workflow%20+%20Pythonista%20%E5%9C%A8%20iOS%20%E4%B8%8A%E4%BD%BF%E7%94%A8%E6%96%B0%E6%B5%AA%E7%9F%AD%E9%93%BE%E6%8E%A5%E6%9C%8D%E5%8A%A1/" class="post-title-link" itemprop="url">Workflow + Pythonista 在 iOS 上使用新浪短链接服务</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-11-27 02:17:00" itemprop="dateCreated datePublished" datetime="2016-11-27T02:17:00-05:00">2016-11-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-25 00:09:17" itemprop="dateModified" datetime="2020-12-25T00:09:17-05:00">2020-12-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="http://ww4.sinaimg.cn/large/006y8lVajw1fa6ilr4uvcj30rg0asq3u.jpg"><img src="http://ww4.sinaimg.cn/large/006y8lVajw1fa6ilr4uvcj30rg0asq3u.jpg" alt="img"></a></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>短链接就是用简短的链接来替代冗长的网址，使它更有利于分享，我在 macOS 使用名为 <a target="_blank" rel="noopener" href="https://github.com/hzlzh/Alfred-Workflows">Shorten URL</a> 的 alfredworkflow 来缩短长链接。</p>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006y8lVajw1fa6gfabdndj30to0ouq6g.jpg"><img src="http://ww2.sinaimg.cn/large/006y8lVajw1fa6gfabdndj30to0ouq6g.jpg" alt="img"></a></p>
<p>那么 iOS 上又该如何实现短链接呢？首先想到的方案就是利用 iOS 上著名的效率神器 <a target="_blank" rel="noopener" href="https://itunes.apple.com/app/workflow-powerful-automation/id915249334">Workflow</a> 来实现。</p>
<p>Workflow 的 Gallery 里有个基于 goo.gl 的短链接 workflow，goo.gl 的接口非常简单。使用以下网址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;is.gd&#x2F;create.php?format&#x3D;simple&amp;url&#x3D;你的长链接</span><br></pre></td></tr></table></figure>

<p>得到的网页内容就是缩短后的链接，然后再用 Workflow 里的 Get Contents of URL 直接获取文本信息再拷贝到剪贴板就够啦。</p>
<p>但使用 Google 的短链接服务需要科学的上网方法，周围的小伙伴大多不具备这样的条件，于是我决定使用渣浪提供的短链接服务。但渣浪的 API 不是单独返回一个短链接，而是以 json 的格式返回，这就需要用到 Python 脚本来提取了。好在 Workflow 支持运行 <a target="_blank" rel="noopener" href="https://itunes.apple.com/cn/app/pythonista-3/id1085978097?mt=8">Pythonsita</a> 的脚本。借此，也抛砖引玉地为读者们介绍一下我实现 Workflow 与 Pythonista 联动的方法。</p>
<p>## 新浪短链接 API</p>
<p>作为一个 Python 初学者，这是个练手的机会。我采用了渣浪提供的以 json 为格式的短链接 API。</p>
<p><strong>它的请求地址是</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;api.t.sina.com.cn&#x2F;short_url&#x2F;shorten.json</span><br></pre></td></tr></table></figure>
<p><strong>需要提供两个传入参数</strong>：</p>
<ul>
<li>source，应用的 appkey</li>
<li>url_long，需要转换的长链接</li>
</ul>
<p><strong>例子</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;api.t.sina.com.cn&#x2F;short_url&#x2F;shorten.xml?source&#x3D;3271760578&amp;url_long&#x3D;https:&#x2F;&#x2F;patricorgi.github.io</span><br></pre></td></tr></table></figure>
<p>这里的 source 码由网友提供，据说未经审核，不过亲测可用。不放心的小伙伴，还可以到<a target="_blank" rel="noopener" href="http://open.weibo.com/">新浪微博开放平台</a>自己去注册一个 appkey。</p>
<h2 id="Workflow-Pythonista"><a href="#Workflow-Pythonista" class="headerlink" title="Workflow + Pythonista"></a>Workflow + Pythonista</h2><p>有了地址，在桌面端用 Python 代码提取其中的字段是很容易的。但在 iOS 下使用 Workflow + Pythonista，我们就必须知道它们之间是如何传递变量的。</p>
<h3 id="从-Workflow-向-Pythonista-输入"><a href="#从-Workflow-向-Pythonista-输入" class="headerlink" title="从 Workflow 向 Pythonista 输入"></a>从 Workflow 向 Pythonista 输入</h3><p>以 <strong>Text</strong> action为例，将其与 <strong>Run Script</strong> action 按次序相连，那么如果要在这个 Script 调用 <strong>Text</strong> action 的输出，代码上我是这样实现的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">import ast</span><br><span class="line"></span><br><span class="line">rawInput &#x3D; sys.argv.__str__() </span><br><span class="line">listInput &#x3D; ast.literal_eval(rawInput)</span><br><span class="line">textInput &#x3D; listInput[1]</span><br></pre></td></tr></table></figure>
<p>下面依次介绍其中变量的含义：</p>
<ul>
<li><code>rawInput</code>，从 <code>sys</code> 获取的、长得与 list 一毛一样但实际上是 string 的内容</li>
<li><code>listInput</code>，利用 <code>ast</code> 转换得到真正的 list 格式，含有两个元素，第一个元素为这个 Script 所在的地址，第二个才是从 Workflow 传入的变量。</li>
<li><code>textInput</code>，获取 <code>listInput</code> 的第二个元素，这才是真正我们需要的东西</li>
</ul>
<p>之后就可以像在桌面端写 Python 代码一样去处理 textInput 了。</p>
<h3 id="短链接提取"><a href="#短链接提取" class="headerlink" title="短链接提取"></a>短链接提取</h3><p>先要在 Script 开头加上这两行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import urllib2</span><br><span class="line">import json</span><br></pre></td></tr></table></figure>
<p>直接贴出这几行代码吧</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">url &#x3D; &quot;http:&#x2F;&#x2F;api.t.sina.com.cn&#x2F;short_url&#x2F;shorten.json?source&#x3D;3271760578&amp;url_long&#x3D;%s&quot; % textInput</span><br><span class="line"></span><br><span class="line">getcontents &#x3D; urllib2.urlopen(url).read()</span><br><span class="line">contents &#x3D; json.loads(getcontents)</span><br><span class="line">data &#x3D; contents[0]</span><br><span class="line">short_url &#x3D; data[&#39;url_short&#39;]</span><br></pre></td></tr></table></figure>
<p>此处的 short_url 即为转换而成的短链接</p>
<h3 id="从-Pythonista-向-Workflow-输出"><a href="#从-Pythonista-向-Workflow-输出" class="headerlink" title="从 Pythonista 向 Workflow 输出"></a>从 Pythonista 向 Workflow 输出</h3><p>这可谓是奇技淫巧，利用的就是 iOS 的剪贴板而已。</p>
<p>首先我们要在 Script 开头加上这两行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import clipboad</span><br><span class="line">import webbrowser</span><br></pre></td></tr></table></figure>
<p>在代码结尾写上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clipboard.set(short_url) # 将短链接添加到剪贴板</span><br><span class="line">webbroswer.open(&#39;workflow:&#x2F;&#x2F;&#39;) # 返回 Workflow 应用</span><br></pre></td></tr></table></figure>
<h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">import ast</span><br><span class="line">import urllib2</span><br><span class="line">import json</span><br><span class="line">import clipboad</span><br><span class="line">import webbrowser</span><br><span class="line"></span><br><span class="line">rawInput &#x3D; sys.argv.__str__() </span><br><span class="line">listInput &#x3D; ast.literal_eval(rawInput)</span><br><span class="line">textInput &#x3D; listInput[1]</span><br><span class="line"></span><br><span class="line">url &#x3D; &quot;http:&#x2F;&#x2F;api.t.sina.com.cn&#x2F;short_url&#x2F;shorten.json?source&#x3D;3271760578&amp;url_long&#x3D;%s&quot; % textInput</span><br><span class="line"></span><br><span class="line">getcontents &#x3D; urllib2.urlopen(url).read()</span><br><span class="line">contents &#x3D; json.loads(getcontents)</span><br><span class="line">data &#x3D; contents[0]</span><br><span class="line">short_url &#x3D; data[&#39;url_short&#39;]</span><br><span class="line"></span><br><span class="line">clipboard.set(short_url) # 将短链接添加到剪贴板</span><br><span class="line">webbroswer.open(&#39;workflow:&#x2F;&#x2F;&#39;) # 返回 Workflow 应用</span><br></pre></td></tr></table></figure>
<h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><p>在 Workflow 中添加一个 Extension 类的 workflow，可用于 Safari 浏览时把当前页面的长地址输入到这个 workflow 中。</p>
<p>在 Pythonista 中，写好这个 Script，命名为 <code>shortenurl.py</code> 或者其他你喜欢的名字，放在 Pythonista 应用的根目录下。</p>
<p>记得 Workflow 的 Run Script 要设置相同的名字。</p>
<p><a target="_blank" rel="noopener" href="http://ww4.sinaimg.cn/large/006y8lVajw1fa6je6avoej30ku191ad4.jpg"><img src="http://ww4.sinaimg.cn/large/006y8lVajw1fa6je6avoej30ku191ad4.jpg" alt="img"></a></p>
<p>获得成就「PY战士」</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2016/11/22/%E6%88%91%E7%9A%84%20Markdown%20%E5%86%99%E4%BD%9C%E6%96%B9%E6%A1%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/11/22/%E6%88%91%E7%9A%84%20Markdown%20%E5%86%99%E4%BD%9C%E6%96%B9%E6%A1%88/" class="post-title-link" itemprop="url">我的 Markdown 写作方案</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-11-22 10:57:44" itemprop="dateCreated datePublished" datetime="2016-11-22T10:57:44-05:00">2016-11-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-25 00:09:22" itemprop="dateModified" datetime="2020-12-25T00:09:22-05:00">2020-12-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>今日著名的写作软件 <a target="_blank" rel="noopener" href="https://ia.net/writer">iA Writer</a> 放出了它的<a target="_blank" rel="noopener" href="https://player.vimeo.com/video/191969564?title=0&byline=0&portrait=0&color=00ADFB">4.0</a>版本。距离去年9月发布的3.0版本，不到15个月的时间。在后起之秀如 MWeb 和一直风头无两的 Ulysses 压力之下，咋看起来这样推进式的更新像是抢占市场份额一样。但实际上，4.0版本的更新却含金量十足。相比只有 macOS 版的 MWeb，iA Writer 还支持 iOS 系统，可以很轻松地在移动设备和桌面设备上共享文件，利用移动端随时随地记录灵感；与同样优雅清爽的 Ulysses 相比，iA Writer 又具有十分亲民的价格，macOS + iOS 两版同时购买也只有Ulysses 三分之一左右的价格。于是在 33% 的 Launch Discount 下，我马上入手了。</p>
<h2 id="我的-Markdown-写作需求"><a href="#我的-Markdown-写作需求" class="headerlink" title="我的 Markdown 写作需求"></a>我的 Markdown 写作需求</h2><ul>
<li>良好的写作环境</li>
<li>多设备同步功能</li>
<li>方便的资源管理</li>
<li>LaTeX语法支持</li>
</ul>
<h3 id="先简单介绍一下-Markdown-语言"><a href="#先简单介绍一下-Markdown-语言" class="headerlink" title="先简单介绍一下 Markdown 语言"></a>先简单介绍一下 Markdown 语言</h3><p>Markdown 思维有点像是低配的 LaTeXLaTeX。与 Word 一类传统文本编辑工具的「所见即所得」特点不同，Markdown 语言则是轻量级的「标记语言」，输入的纯文本信息可经由特殊符号标记输出成为富文本信息。下面是一些简单的例子：</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"><span class="bullet">-</span> 项目A</span><br><span class="line"><span class="bullet">-</span> 项目B</span><br><span class="line"><span class="bullet">-</span> 项目C</span><br><span class="line"><span class="bullet">	1.</span> 步骤1</span><br><span class="line"><span class="bullet">	2.</span> 步骤2</span><br><span class="line"><span class="bullet">	3.</span> 步骤3</span><br><span class="line"></span><br><span class="line">代码格式：<span class="code">`git clone https://github.com/iissnan/hexo-theme-next themes/next`</span> </span><br><span class="line"></span><br><span class="line">插入链接：[<span class="string">Patrick&#x27;s Blog</span>](<span class="link">patricorgi.github.io</span>)</span><br><span class="line"></span><br><span class="line">插入图片：![<span class="string">yantuanzi</span>](<span class="link">http://i.imgur.com/67YuVnf.jpg</span>)</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>经输出后，我们就可以得到这样的打印结果：</p>
<hr>
<h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><ul>
<li>项目A</li>
<li>项目B</li>
<li>项目C<ol>
<li>步骤1</li>
<li>步骤2</li>
<li>步骤3</li>
</ol>
</li>
</ul>
<p>代码格式：<code>git clone https://github.com/iissnan/hexo-theme-next themes/next</code></p>
<p>插入链接：[Patrick’s Blog](<a href="https://patricorgi.github.io/2016/11/22/%E6%88%91%E7%9A%84">https://patricorgi.github.io/2016/11/22/我的</a> Markdown 写作方案/patricorgi.github.io)</p>
<p>插入图片：<a target="_blank" rel="noopener" href="http://i.imgur.com/67YuVnf.jpg"><img src="http://i.imgur.com/67YuVnf.jpg" alt="yantuanzi"></a></p>
<hr>
<p>除了轻量级的文本格式化输出，软件本身也是轻量级的，iA Writer 本身只有 12.4M 的体积，从各种意义上都能减小设备的负担。</p>
<h2 id="良好的写作环境"><a href="#良好的写作环境" class="headerlink" title="良好的写作环境"></a>良好的写作环境</h2><p>良好的创作环境是必要的，就好比高中时候我们都会迫不及待地在新买的笔记本上记笔记一样，毫不夸张地说，这种新奇感可以很大程度上激发人的写作欲望。</p>
<p><a target="_blank" rel="noopener" href="http://ww3.sinaimg.cn/large/006tNc79jw1fa1w847jxqj31kw0wxn52.jpg"><img src="http://ww3.sinaimg.cn/large/006tNc79jw1fa1w847jxqj31kw0wxn52.jpg" alt="img"></a></p>
<p>我们可以先看看 MWeb，它的功能强大，预置了几乎所有 Markdown 语言的格式化按钮，用户不需要记忆和手动输入比较复杂的 Markdown 命令，就可以进行类似上面的链接和图片插入。它甚至还支持 LaTeXLaTeX 输入和即时预览，这也是我最初看好 MWeb 的原因。</p>
<p>但于我，MWeb 的问题在于它复杂的界面，各式各样不能和谐统一的按钮，以及不能隐藏的标题栏。极简主义表示无法忍受，我更倾向于 iA Writer 或 Ulysses 那种纯白的界面，没错，它们的界面就是一片空白，就像新买的笔记本一般精致优雅，让你有马上在上面进行写作的欲望。</p>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006tNc79jw1fa147vx93cj31kw0znmy6.jpg"><img src="http://ww2.sinaimg.cn/large/006tNc79jw1fa147vx93cj31kw0znmy6.jpg" alt="img"></a></p>
<p>我当时向作者发了 Feedback 建议把 MWeb 奇怪的 LaTeX 预览字体改成正统的 Latin Modern Math。然后 MWeb 作者给我的说法「字体定制功能并不是给普通用户用的」，当时我就不开心了，你应该帮助用户解决才对，反过来说用户太「普通」，所以到现在这个问题仍然没有解决。</p>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006tNc79jw1fa1z22ehcmj30ia082t9x.jpg"><img src="http://ww2.sinaimg.cn/large/006tNc79jw1fa1z22ehcmj30ia082t9x.jpg" alt="img"></a></p>
<h2 id="多设备同步"><a href="#多设备同步" class="headerlink" title="多设备同步"></a>多设备同步</h2><p>iA Writer 和 Ulysses 都能利用 iCloud 进行多设备同步，还能支持 Dropbox 一类的云盘存储。所以可以随时随地写作、并方便上传手机图片。我们也不需要担心手机端的书写效率问题，因为 iA Writer for iOS 的键盘上内置了一排标记符号的按键，可以快捷输入这些标识符。不知 MWeb 什么时候才推出 iOS 版并实现多设备同步呢，如果这样的话我可能还会再考虑一下它呢。</p>
<h2 id="文件管理系统"><a href="#文件管理系统" class="headerlink" title="文件管理系统"></a>文件管理系统</h2><p>或者说外部文档浏览功能，使用静态博客的读者可能会知道，所有的文章都是放在同一个文件夹下的，站点文件夹下有一定的层次结构，如果编辑器能自带树状资源管理器，那读写博客是十分方便的。</p>
<h2 id="面包还是要的"><a href="#面包还是要的" class="headerlink" title="面包还是要的"></a>面包还是要的</h2><p>可有时候我还需要输入 LaTeX 公式，这该怎么办呢？方案有二：</p>
<h3 id="方案一：使用-Typora"><a href="#方案一：使用-Typora" class="headerlink" title="方案一：使用 Typora"></a>方案一：使用 Typora</h3><p>Typora 是一款免费极简 Markdown 软件，原生支持了 LaTeX 公式的输入，</p>
<p><a target="_blank" rel="noopener" href="http://ww2.sinaimg.cn/large/006tNc79jw1fa1wc9ode7j315i0x00ux.jpg"><img src="http://ww2.sinaimg.cn/large/006tNc79jw1fa1wc9ode7j315i0x00ux.jpg" alt="img"></a></p>
<p>对我而言，公式书写的情况占了少数，所以偶尔用 Typora 替代 iA Writer 书写，或用它来检测 LaTeX 语法是否正确。</p>
<p>Typora 像是一个带有 Markdown+LaTeX 功能的「记事本」，它没有同步功能和文件管理系统，否则它将会成为我唯一的 Markdown 编辑器。</p>
<h3 id="方案二：将公式作为图片插入"><a href="#方案二：将公式作为图片插入" class="headerlink" title="方案二：将公式作为图片插入"></a>方案二：将公式作为图片插入</h3><p>如果 macOS 里安装了 MacTeX，那么一定会有个名为 LaTeXiT 的软件，这个软件专注于公式生产。你可以直接键入公式，然后「LaTeX iT！」就能生成公式，可以将其复制或保存为 png 在内的多种格式，然后我们把 png 图片插入 Markdown 文件里就可以啦。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2016/11/18/%E5%BD%BB%E5%BA%95%E5%8D%B8%E8%BD%BD%20.pkg%20%E5%92%8C%20.mpkg%20%E8%BD%AF%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/11/18/%E5%BD%BB%E5%BA%95%E5%8D%B8%E8%BD%BD%20.pkg%20%E5%92%8C%20.mpkg%20%E8%BD%AF%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">彻底卸载 .pkg 和 .mpkg 软件的方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-11-18 07:14:14" itemprop="dateCreated datePublished" datetime="2016-11-18T07:14:14-05:00">2016-11-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-25 00:09:25" itemprop="dateModified" datetime="2020-12-25T00:09:25-05:00">2020-12-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>有时候我们安装一个软件，下载到的不是可以直接复制进 Application 目录的 .app 文件，而是 .pkg/.mpkg 安装包。这是类似于 Windows 下的 setup.exe 安装文件，其缺点是无法在 Application 中直接删除应用(.app 文件)来卸载。有一种解决方案是删除它的相关文件及文件夹来卸载它们，但这样的卸载工作繁琐且又不彻底。</p>
<p>因此我们需要一个 pkg 管理工具——<a target="_blank" rel="noopener" href="https://github.com/mpapis/pkg_uninstaller">pkg uninstaller</a></p>
<h2 id="安装-pkg-uninstaller"><a href="#安装-pkg-uninstaller" class="headerlink" title="安装 pkg_uninstaller"></a>安装 pkg_uninstaller</h2><p>安装它的方法很简单，只需要一条命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt; &lt;(curl -sL https://raw.github.com/mpapis/pkg_uninstaller/master/pkg-install)</span><br></pre></td></tr></table></figure>
<p>然后在 <code>.bash_profile</code> 里加入路径信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH &#x3D; $PATH:&#x2F;opt&#x2F;pkg_uninstaller:$HOME&#x2F;.pkg_uninstaller</span><br></pre></td></tr></table></figure>
<p>最后再 <code>source .bash_profile</code> 即可。</p>
<h2 id="使用-pkg-uninstaller"><a href="#使用-pkg-uninstaller" class="headerlink" title="使用 pkg uninstaller"></a>使用 pkg uninstaller</h2><ul>
<li><code>pkg-list</code> 列出所有电脑上的 pkg 软件</li>
<li><code>pkg-uninstall &lt;PKG_NAME&gt;</code> 用于卸载单个 pkg 软件</li>
</ul>
<h2 id="配合-Shell-脚本批量卸载"><a href="#配合-Shell-脚本批量卸载" class="headerlink" title="配合 Shell 脚本批量卸载"></a>配合 Shell 脚本批量卸载</h2><p>例如我要卸载所有用 pkg 包安装的 ROOT 工具，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg-list | grep &#39;ROOT&#39; &gt;&gt; temp.sh</span><br></pre></td></tr></table></figure>
<p>得到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">com.HEPSoft.ROOT.applications</span><br><span class="line">com.HEPSoft.ROOT.c-index-test</span><br><span class="line">com.HEPSoft.ROOT.clang-headers</span><br><span class="line">com.HEPSoft.ROOT.clangAnalysis</span><br><span class="line">com.HEPSoft.ROOT.clangAST</span><br><span class="line">com.HEPSoft.ROOT.clangASTMatchers</span><br><span class="line">com.HEPSoft.ROOT.clangBasic</span><br><span class="line">com.HEPSoft.ROOT.clangCodeGen</span><br><span class="line">com.HEPSoft.ROOT.clangDriver</span><br><span class="line">com.HEPSoft.ROOT.clangDynamicASTMatchers</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>在 vim 中编辑 <code>temp.sh</code> 文件，利用 vim 命令</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/^/sudo\ pkg-uninstall\ /g</span><br></pre></td></tr></table></figure>
<p>这是在每一行前加上 <code>pkg-uninstall</code> 命令，为防止权限不足，加上 <code>sudo</code></p>
<p>然后回到 bash 执行 <code>sh temp.sh</code> 即可。当然，最后别忘了删除 temp.sh</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://patricorgi.github.io/2016/11/12/%E8%BF%99%E5%8F%AF%E8%83%BD%E6%98%AF%20Mac%20%E4%B8%8A%E6%9C%80%E4%BD%B3%E8%A7%86%E9%A2%91%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E5%92%8C%E5%8E%8B%E5%88%B6%E6%96%B9%E6%A1%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="P. Wu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Patrick's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/11/12/%E8%BF%99%E5%8F%AF%E8%83%BD%E6%98%AF%20Mac%20%E4%B8%8A%E6%9C%80%E4%BD%B3%E8%A7%86%E9%A2%91%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E5%92%8C%E5%8E%8B%E5%88%B6%E6%96%B9%E6%A1%88/" class="post-title-link" itemprop="url">这可能是 Mac 上最佳视频格式转换和压制方案</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-11-12 08:11:55" itemprop="dateCreated datePublished" datetime="2016-11-12T08:11:55-05:00">2016-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-25 00:09:58" itemprop="dateModified" datetime="2020-12-25T00:09:58-05:00">2020-12-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="http://ww2.sinaimg.cn/large/801b780ajw1f9qkmzyc7kj21100iejti.jpg" alt="hb"></p>
<blockquote>
<p>HandBrake: Open Source Video Transcoder</p>
</blockquote>
<p>对于很多视频编辑者来说，Mac 系统是不可或缺的神兵利器。即使是对普通用户而已，我们也有影音娱乐以及偶尔的上传视频需求，这一般会涉及到以下两个问题：</p>
<ol>
<li>视频压制</li>
<li>视频格式转换</li>
</ol>
<h2 id="视频压制"><a href="#视频压制" class="headerlink" title="视频压制"></a>视频压制</h2><p>视频从拍摄到上传到网站一般会经过这样的过程：视频采集，视频剪辑，视频压制，上传。</p>
<p>我们通过手机、相机采集到的视频的码率远超网页视频的码率。举个具体的例子，iOS 设备采集的视频码率大约在 50 Mbps，相比而言 Bilibili 弹幕网对超清视频的要求上限是 1.8 Mbps，一旦超过这个码率，视频会被官方重新压制（官方压制后的清晰度惨不忍睹）。所以我们必须自力更生压制出适用于 B 站上传的「高质量」视频——<strong>码率无限趋近于 1.8 Mbps 却又不超过 1.8 Mbps，以保证视频原有的分辨率和帧率</strong>。</p>
<blockquote>
<p>码率即每秒钟传输的信息量，例如一部动画每秒钟为 30 张画面(30 帧)，每张画面大小为 1 Mb，那么该动画视频的码率即为 30 Mbps，低码率的视频具有相对来说更低的视频文件体积大小。</p>
</blockquote>
<h2 id="视频格式转换"><a href="#视频格式转换" class="headerlink" title="视频格式转换"></a>视频格式转换</h2><p>为什么要统一 Mac 系统下的视频格式？在 Windows 下随手下载一个XX影音就能解决几乎所有类型的视频的解码问题。在 Mac 下也是一样的，但是 Mac 系统有个好玩的功能——快速预览（QuickLook）——在任何文件上敲击「空格」键，可以快速预览文件内容。比如，可以快速预览 PDF 文件每一页的内容，而不需要打开 PDF 阅读器，快速播放音乐文件而不需要打开音乐播放器，快速预览图片自不必说以及快速预览视频。但尴尬是，目前快速预览视频仅限于 mp4 和 mov 格式。因此我们要进行格式转换，使电脑中常用的视频文件格式统一为 mp4 和 mov。</p>
<p><img src="http://ww2.sinaimg.cn/large/006tNc79jw1f9qc5frof5j30dw07uwep.jpg" alt="rm"></p>
<p>上图为无法预览的 rm 格式文件</p>
<h2 id="Mac-上压制视频的常用方案"><a href="#Mac-上压制视频的常用方案" class="headerlink" title="Mac 上压制视频的常用方案"></a>Mac 上压制视频的常用方案</h2><ul>
<li><a target="_blank" rel="noopener" href="https://itunes.apple.com/cn/app/imovie/id408981434?mt=12&ls=1&v0=www-cn-mac-imovie-app-imovie">iMovie</a>（免费）</li>
<li><a target="_blank" rel="noopener" href="https://itunes.apple.com/cn/app/final-cut-pro/id424389933?mt=12">Final Cut Pro</a>（￥1998.00）</li>
</ul>
<p>上述两款软件均可以进行高质量的视频压制和格式转换，但这里所谓的「高质量」并不是我们想要的「高质量」，而是指压制出来的视频码率仍然很高，超出了 1.8 Mbps 的限制。此外，它们具有 GB 级别的体积，作为 Mac 软件来说实在太大了，就 Final Cut Pro 而言还有很多普通用户用不到的专业功能，完全就是多余。</p>
<h2 id="Handbrake"><a href="#Handbrake" class="headerlink" title="Handbrake"></a>Handbrake</h2><p>相较之下 Handbrake 就显得小巧精悍了，它仅有不到 30 MB 的体积。先来看一下它的主界面，不要马上就被它复杂的交互界面吓到，只要记住下面列出的几点即可。即便记不住也没关系，根据下面会介绍例子自己练习一次也就熟悉了。</p>
<p><img src="http://ww3.sinaimg.cn/large/006tNc79jw1f9qc5wb6j9j30rs0jw77z.jpg" alt="handbrake1"></p>
<ul>
<li>源文件路径：显示你目前正在处理的文件路径，导入源文件可以通过右上角的「Source」按钮选择文件，也可以直接拖动源文件到 Handbrake 界面下导入</li>
<li>目标文件路径：压制/转换后视频的存储路径</li>
<li>格式：目前有 mp4 和 mkv 两种格式</li>
<li>编码设置：这部分是重点，在下面将会举例说明</li>
<li>画幅设置：这部分是重点，在下面将会举例说明</li>
<li>预览：完成编码设置之后可以通过这里看最终效果，可以预览静帧画面质量以及视频中任意部分 15 秒内动态画面质量</li>
<li>首选项：除了预设的一些模板之外还可以存储用户自定义的「编码设置+画幅设置」</li>
</ul>
<p>下面按之前提到的两个问题说明它的使用方法。</p>
<h3 id="1-视频格式转换"><a href="#1-视频格式转换" class="headerlink" title="1. 视频格式转换"></a>1. 视频格式转换</h3><p>把之前无法快速预览的「[国产经典动画.十二生肖的故事].01.rm」文件拖入 Handbrake，然后目标文件设置为桌面，得到</p>
<p><img src="http://ww1.sinaimg.cn/large/006tNc79jw1f9qgo055jzj30rs07idhf.jpg" alt="source"></p>
<p>进行简单的视频格式转换时，由于我们没有对视频体积、码率的要求，所以只要使用默认设置进行转换即可，直接点击左上的「Start」，等待转换完成就可以了。</p>
<p>转换后的十二生肖动画在 Mac 下可以利用 QuickLook 直接预览，视频预览还可以拖动进度条，占用的系统资源也比较少：</p>
<p><img src="http://ww1.sinaimg.cn/large/801b780ajw1f9qjk9m8auj21220xy11u.jpg" alt="12shengxiao"></p>
<p>经笔者测试，在保证相同视频质量的同时，除 mkv 格式的视频之外，其他格式的视频在转换为 mp4 格式后，体积都减小了，统一视频格式的同时还可以省下更多的空间，</p>
<p><img src="http://ww1.sinaimg.cn/large/801b780ajw1f9qiu6x1gbj20g40a3aaf.jpg" alt="wst"></p>
<p>如果选择「Add to Queue」，还可以用同一套设置去批量转换视频格式，读者可以自己研究一下。</p>
<p>下面对默认设置里重要的两部分加以说明。</p>
<h4 id="编码设置"><a href="#编码设置" class="headerlink" title="编码设置"></a>编码设置</h4><p><img src="http://ww2.sinaimg.cn/large/006tNc79jw1f9qgo0a1w6j30rs0cdgnq.jpg" alt="encoding"></p>
<ul>
<li>Quality<ul>
<li>Constant Quality: RF 20 这里的 RF 值越低视频质量越高，RF 值在 22 以内就已经具有很高的质量，所以我们按照默认值 20 转换格式即可。</li>
<li>Average Bitrate (kbps): 未选择（这在下一部分说）</li>
</ul>
</li>
<li>Video Codec: H.264(x264) 选择此项无可厚非，这是主流视频编码器，具有小体积高质量的优点</li>
<li>Encoder Options<ul>
<li>Preset: medium(笔者认为此项是视频压制的精髓，这一项决定了编码的速率，同时也决定了编码的精细程度，速率越快 Handbrake 的压制越马虎，效果越差，速率越慢，Handbrake 的压制越仔细，越能得到高质量低码率的视频)</li>
<li>Tune: none(out of film, animation, and so on)</li>
</ul>
</li>
</ul>
<h4 id="画幅设置-Picture-Settings"><a href="#画幅设置-Picture-Settings" class="headerlink" title="画幅设置(Picture Settings)"></a>画幅设置(Picture Settings)</h4><p><img src="http://ww3.sinaimg.cn/large/006tNc79jw1f9qfqk770jj30m80aqgn2.jpg" alt="picture1"></p>
<ul>
<li>画幅设置中的 Cropping 裁边模式默认为 Automatic 自动裁边，这会起到去除黑边的作用，但有时候我们不需要去除黑边，只要改选为 Custom，然后把下面四个数值都设置为 0 即可</li>
<li>Anamorphic 默认下是 Loose，意思就是让视频的分辨率能够自适应为下面数值为「Modulus」倍数的分辨率（比如说 1920×1080，其中 1920 是 2 的倍数），对于 1921.6×1080.9 这样奇怪的分辨率（仍然是 16:9 比例）在 Loose 设置下能自适应为 2 倍数分辨率，即1921.6×1080.9（非 2 倍数分辨率）→ 1920×1080（2 倍数分辨率），可以看出它是会牺牲部分分辨率的，不过 Modulus 倍分辨率将具有更高的压制效率。</li>
<li>Filter 里可以设置 decomb 部分反交错和 deinterlace 完全反交错。分别适合部分交错视频和完全交错视频的修正。交错可以简单理解为重影，就像下面这个样子。<br><img src="http://ww4.sinaimg.cn/large/801b780ajw1f9qk9w54k1j207404z74h.jpg" alt="interlace"></li>
</ul>
<h3 id="2-视频压制"><a href="#2-视频压制" class="headerlink" title="2. 视频压制"></a>2. 视频压制</h3><p>接下来介绍的是 B 站 60 帧超清视频压制的实例。不过首先推荐各位 App Store 一款查看视频文件信息的免费软件 <a target="_blank" rel="noopener" href="https://itunes.apple.com/cn/app/media-info/id550128418?mt=12">Media-Info</a>。它可以帮助你查看视频文件的所有信息，包括文件大小、时长、码率、编码格式、分辨率、帧率等等。</p>
<p>先用 Media-Info 查看一下将要压制的视频信息</p>
<img src="http://ww4.sinaimg.cn/large/006tNc79jw1f9qhws2qxuj30jg0q4tc8.jpg" width = "500" alt="ow" align=center />

<ul>
<li>Bit rate(码率): 20352 kbps(= 20.352 Mbps)</li>
<li>Width: 1600</li>
<li>Height: 900</li>
<li>*interlace(比较少见，但如果出现了，就需要在画幅设置中的Filter里把 decomb 改为 deinterlace，否则视频压制后可能出现重影现象)<br>（对视频压制而言，重要的也就这几个啦）</li>
</ul>
<p>这是我录制的一个 1600×900 分辨率、60 FPS 的游戏视频，它的码率实在是太高了，直接上传到B站上，肯定会被官方压得不成样子，而且帧率是肯定会被降到 30 FPS，极其影响观感。</p>
<p>我们在默认设置上进行修改，设置如下：</p>
<h4 id="编码设置-1"><a href="#编码设置-1" class="headerlink" title="编码设置"></a>编码设置</h4><ul>
<li>Quality：一定要改成 Average Bitrate (kbps) <strong>自定义</strong>平均码率并勾选「2-pass encoding」，而不是 Constant Quality 玄学码率。因为是平均码率，我们保险起见设置为 1650 kbps，保证视频每一部分的码率都不超过 1800 kbps。「2-pass encoding」即二次压制，对一次视频进行两次压制，好比铺设马路，压路机在铺好的水泥上压过一回之后回头再压一回，使得第一次压制不平整的区域更加平整。如果担心太慢也可以再勾选「Turbo first pass」，这样会使第一次压制快速进行。</li>
<li>Preset：设置为 veryslow 或者 placebo。从 20352 kbps 疯狂压制到 1650 kbps 必然会损失大量的视频信息，所以我们必须让 Handbrake 仔仔细细地压制，使视频中结构简单的大色块画面成分尽量压小，结构细致的画面成分尽量保留，挤出视频这块海绵里所有的水分，但是又不破坏海绵中的纤维结构。</li>
<li>Tune: 这个可以不改，默认为 none。如果是游戏或动画视频，笔者建议改为 animation。</li>
</ul>
<p>设置结果如下</p>
<p><img src="http://ww3.sinaimg.cn/large/801b780ajw1f9qimviihij20rs0c7wgu.jpg" alt="encoding1"></p>
<h4 id="画幅设置"><a href="#画幅设置" class="headerlink" title="画幅设置"></a>画幅设置</h4><p>因为是上传到 B 站的视频，那么其比例为 16:9，因为视频原本就是 16:9 的格式，如果 automatic 有自动裁边我们就要将它改选为 custom，但是这里 automatic 的数值均为0，所以画幅设置里不需要修改任何设置。</p>
<p><img src="http://ww4.sinaimg.cn/large/801b780ajw1f9qipwvrqdj20ss0dwdi3.jpg" alt="picture2"></p>
<p>设置结束之后，我们点击「Start」开始压制，这段仅30秒的视频竟然压制了5分钟，可想而知一部90分钟以上的电影在这套设置下需要压制多久了。不过回报也是值得的，视频大小从 87 MB 被压缩到了 8.4 MB。</p>
<img src="http://ww4.sinaimg.cn/large/801b780ajw1f9qj7r47mij20jg0q5wic.jpg" width = "500" alt="compressed" align=center />


<p>这样的视频文件可以保证其 1600×900 分辨率，60 帧的质量，上传到B站后而不会损失任何画质。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>存储下自己常用的压制配置到 Presets 里，流程就可以简化为拖入源文件 - 选择首选项 - Start！</p>
<p><img src="http://ww3.sinaimg.cn/large/006tNc79jw1f9brc50sfaj304w04wdfu.jpg" alt="done"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">P. Wu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">P. Wu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
